{"version":3,"file":"bloomstack_desk.js","sources":["../../../apps/bloomstack_core/bloomstack_core/public/js/components/Popover.vue?rollup-plugin-vue=script.js","../../../apps/bloomstack_core/bloomstack_core/public/js/components/Popover.vue","../../../apps/bloomstack_core/bloomstack_core/public/js/components/Dropdown.vue?rollup-plugin-vue=script.js","../../../apps/bloomstack_core/bloomstack_core/public/js/components/Dropdown.vue","../../../apps/bloomstack_core/bloomstack_core/public/js/components/DeskModuleBox.vue?rollup-plugin-vue=script.js","../../../apps/bloomstack_core/bloomstack_core/public/js/components/DeskModuleBox.vue","../../../apps/bloomstack_core/bloomstack_core/public/js/components/DeskSection.vue?rollup-plugin-vue=script.js","../../../apps/bloomstack_core/bloomstack_core/public/js/components/DeskSection.vue","../../../apps/bloomstack_core/bloomstack_core/public/js/components/utils.js","../../../apps/bloomstack_core/bloomstack_core/public/js/components/Desktop.vue?rollup-plugin-vue=script.js","../../../apps/bloomstack_core/bloomstack_core/public/js/components/Desktop.vue","../../../apps/bloomstack_core/bloomstack_core/public/js/desk.js"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet instances = [];\n\nfunction onDocumentClick(e, el, fn) {\n  let target = e.target;\n  if (el !== target && !el.contains(target)) {\n    fn(e);\n  }\n}\n\nexport default {\n  name: \"Popover\",\n  props: {\n    align: {\n      default: \"left\"\n    },\n    fullwidth: {\n      default: false\n    }\n  },\n  data() {\n    return {\n      isOpen: false\n    };\n  },\n  directives: {\n    outside: {\n      bind(el, binding) {\n        el.dataset.outsideClickIndex = instances.length;\n\n        const fn = binding.value;\n        const click = function(e) {\n          onDocumentClick(e, el, fn);\n        };\n\n        document.addEventListener(\"click\", click);\n        instances.push(click);\n      },\n      unbind(el) {\n        const index = el.dataset.outsideClickIndex;\n        const handler = instances[index];\n        document.addEventListener(\"click\", handler);\n        instances.splice(index, 1);\n      }\n    }\n  },\n  computed: {\n    popoverClasses() {\n      return {\n        \"pin-r\": this.align === \"right\",\n        \"pin-l\": this.align === \"left\",\n        \"w-full\": this.fullwidth === true\n      };\n    }\n  },\n  methods: {\n    togglePopover() {\n      this.isOpen = !this.isOpen;\n    },\n    closePopover() {\n      this.isOpen = false;\n    }\n  }\n};\n","<template>\n  <div class=\"inline-block relative\" :class=\"{ 'w-full': this.fullwidth }\" v-outside=\"closePopover\">\n    <div @click=\"togglePopover\">\n      <slot :togglePopover=\"togglePopover\" :closePopover=\"closePopover\"></slot>\n    </div>\n    <div v-show=\"isOpen\" class=\"absolute mt-default z-20\" :class=\"popoverClasses\">\n      <slot name=\"popover-content\"></slot>\n    </div>\n  </div>\n</template>\n<script>\nlet instances = [];\n\nfunction onDocumentClick(e, el, fn) {\n  let target = e.target;\n  if (el !== target && !el.contains(target)) {\n    fn(e);\n  }\n}\n\nexport default {\n  name: \"Popover\",\n  props: {\n    align: {\n      default: \"left\"\n    },\n    fullwidth: {\n      default: false\n    }\n  },\n  data() {\n    return {\n      isOpen: false\n    };\n  },\n  directives: {\n    outside: {\n      bind(el, binding) {\n        el.dataset.outsideClickIndex = instances.length;\n\n        const fn = binding.value;\n        const click = function(e) {\n          onDocumentClick(e, el, fn);\n        };\n\n        document.addEventListener(\"click\", click);\n        instances.push(click);\n      },\n      unbind(el) {\n        const index = el.dataset.outsideClickIndex;\n        const handler = instances[index];\n        document.addEventListener(\"click\", handler);\n        instances.splice(index, 1);\n      }\n    }\n  },\n  computed: {\n    popoverClasses() {\n      return {\n        \"pin-r\": this.align === \"right\",\n        \"pin-l\": this.align === \"left\",\n        \"w-full\": this.fullwidth === true\n      };\n    }\n  },\n  methods: {\n    togglePopover() {\n      this.isOpen = !this.isOpen;\n    },\n    closePopover() {\n      this.isOpen = false;\n    }\n  }\n};\n</script>\n<style scoped>\n.relative {\n  position: relative;\n}\n.inline-block {\n  display: inline-block;\n}\n.w-full {\n  width: 100%;\n}\n.pin-r {\n  right: 0;\n}\n.pin-l {\n  left: 0;\n}\n.absolute {\n  position: absolute;\n}\n.mt-default {\n  margin-top: 25px;\n}\n.z-20 {\n  z-index: 20;\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Popover from \"./Popover.vue\";\n\nexport default {\n  name: \"Dropdown\",\n  components: {\n    Popover\n  },\n  props: {\n    items: {\n      type: Array,\n      default: () => []\n    },\n    label: {\n      type: String,\n      default: \"Dropdown\"\n    },\n    align: {\n      type: String,\n      default: \"right\"\n    }\n  },\n  data() {\n    return {\n      isOpen: false\n    };\n  },\n  computed: {\n    dropdownItems() {\n      return (this.items || []).map(item => {\n        if (typeof item === \"string\") {\n          return {\n            label: item,\n            action: console.log\n          };\n        }\n        if (!item.action && item.route) {\n          item.action = this.setRoute.bind(this, item.route);\n        }\n        return item;\n      });\n    }\n  },\n  methods: {\n    setRoute(route) {\n      this.$router.push(route);\n    }\n  }\n};\n","<template>\n  <Popover :align=\"align\">\n    <slot></slot>\n    <ul slot=\"popover-content\" class=\"list-reset border\">\n      <li v-for=\"item of dropdownItems\" :key=\"item.label\" :class=\"item.class || null\">\n        <a v-if=\"item.route\" class=\"list-item\" :href=\"item.route\">{{ item.label }}</a>\n        <div v-else class=\"list-item\" @click=\"item.action\">{{ item.label }}</div>\n      </li>\n    </ul>\n  </Popover>\n</template>\n<script>\nimport Popover from \"./Popover.vue\";\n\nexport default {\n  name: \"Dropdown\",\n  components: {\n    Popover\n  },\n  props: {\n    items: {\n      type: Array,\n      default: () => []\n    },\n    label: {\n      type: String,\n      default: \"Dropdown\"\n    },\n    align: {\n      type: String,\n      default: \"right\"\n    }\n  },\n  data() {\n    return {\n      isOpen: false\n    };\n  },\n  computed: {\n    dropdownItems() {\n      return (this.items || []).map(item => {\n        if (typeof item === \"string\") {\n          return {\n            label: item,\n            action: console.log\n          };\n        }\n        if (!item.action && item.route) {\n          item.action = this.setRoute.bind(this, item.route);\n        }\n        return item;\n      });\n    }\n  },\n  methods: {\n    setRoute(route) {\n      this.$router.push(route);\n    }\n  }\n};\n</script>\n<style scoped>\n.list-reset {\n  list-style: none;\n  padding: 0;\n  cursor: pointer;\n  background-color: #fff;\n  width: 16rem;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.08);\n  border-bottom-right-radius: 0.25rem;\n  border-bottom-left-radius: 0.25rem;\n}\n.list-item:hover {\n  background-color: #f0f4f7;\n}\n.list-item {\n  padding: 14px;\n  transition: all 0.1s ease-in;\n}\na {\n  font-size: 12px;\n  text-decoration: none;\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Dropdown from \"./Dropdown.vue\";\n\nexport default {\n  props: [\n    \"index\",\n    \"name\",\n    \"label\",\n    \"category\",\n    \"type\",\n    \"module_name\",\n    \"link\",\n    \"count\",\n    \"onboard_present\",\n    \"links\",\n    \"description\",\n    \"hidden\",\n    \"icon\"\n  ],\n  components: {\n    Dropdown\n  },\n  data() {\n    return {\n      hovered: 0\n    };\n  },\n  computed: {\n    icon_class() {\n      if (this.icon) {\n        return this.icon;\n      } else {\n        return \"octicon octicon-file-text\";\n      }\n\t},\n\tdropdown_links() {\n\t\treturn this.type === 'module' ? this.links\n\t\t\t.filter(link => !link.hidden)\n\t\t\t.concat([\n\t\t\t\t{ label: __('Customize'), action: () => this.$emit('customize'), class: 'border-top' }\n\t\t\t]) : [];\n\t}\n  },\n};\n","<template>\n  <div\n    v-if=\"!hidden\"\n    class=\"border module-box\"\n    :class=\"{ 'hovered-box': hovered }\"\n\t:data-module-name=\"module_name\"\n  >\n    <div class=\"flush-top\">\n      <div class=\"module-box-content\">\n        <div class=\"level\">\n          <a class=\"module-box-link\" :href=\"type === 'module' ? '#modules/' + module_name : link\">\n            <h4 class=\"h4\">\n              <div>\n                <i :class=\"icon_class\" style=\"color:#8d99a6;font-size:18px;margin-right:6px;\"></i>\n                {{ label }}\n              </div>\n            </h4>\n          </a>\n          <dropdown v-if=\"dropdown_links && dropdown_links.length\" :items=\"dropdown_links\">\n            <span class=\"pull-right\">\n              <i class=\"octicon octicon-chevron-down text-muted\"></i>\n            </span>\n          </dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Dropdown from \"./Dropdown.vue\";\n\nexport default {\n  props: [\n    \"index\",\n    \"name\",\n    \"label\",\n    \"category\",\n    \"type\",\n    \"module_name\",\n    \"link\",\n    \"count\",\n    \"onboard_present\",\n    \"links\",\n    \"description\",\n    \"hidden\",\n    \"icon\"\n  ],\n  components: {\n    Dropdown\n  },\n  data() {\n    return {\n      hovered: 0\n    };\n  },\n  computed: {\n    icon_class() {\n      if (this.icon) {\n        return this.icon;\n      } else {\n        return \"octicon octicon-file-text\";\n      }\n\t},\n\tdropdown_links() {\n\t\treturn this.type === 'module' ? this.links\n\t\t\t.filter(link => !link.hidden)\n\t\t\t.concat([\n\t\t\t\t{ label: __('Customize'), action: () => this.$emit('customize'), class: 'border-top' }\n\t\t\t]) : [];\n\t}\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"frappe/public/less/variables\";\n\n.module-box {\n  border-radius: 4px;\n  padding: 5px 15px;\n  display: block;\n  background-color: #ffffff;\n}\n\n.module-box.sortable-chosen {\n\tbackground-color: @disabled-background;\n\tborder-color: @disabled-background;\n}\n\n.modules-container:not(.dragging) .module-box:hover {\n\tborder-color: @text-muted;\n}\n\n.hovered-box {\n  background-color: @light-bg;\n}\n\n.octicon-chevron-down {\n  font-size: 14px;\n  padding: 4px 6px 2px 6px;\n  border-radius: 4px;\n\n  &:hover {\n\tbackground: @btn-bg;\n  }\n}\n\n.octicon-chevron-down:hover {\n  cursor: pointer;\n}\n\n.module-box-content {\n  width: 100%;\n\n  p {\n    margin-top: 5px;\n    font-size: 80%;\n    display: flex;\n    overflow: hidden;\n  }\n}\n\n.module-box-link {\n  flex: 1;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  text-decoration: none;\n  --moz-text-decoration-line: none;\n}\n\n.icon-box {\n  padding: 15px;\n  width: 54px;\n  display: flex;\n  justify-content: center;\n}\n\n.icon {\n  font-size: 24px;\n}\n\n.open-notification {\n  top: -2px;\n}\n\n.shortcut-tag {\n  margin-right: 5px;\n}\n\n.drag-handle {\n  font-size: 12px;\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DeskModuleBox from \"./DeskModuleBox.vue\";\n\nexport default {\n\tprops: ['category', 'modules'],\n\tcomponents: {\n\t\tDeskModuleBox\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdragging: false,\n\t\t\tfetched_module_links: {}\n\t\t}\n\t},\n\tmounted() {\n\t\tif (!frappe.utils.is_mobile()) {\n\t\t\tthis.setup_sortable();\n\t\t}\n\t},\n\tmethods: {\n\t\tsetup_sortable() {\n\t\t\tlet modules_container =this.$refs['modules-container'];\n\t\t\tthis.sortable = new Sortable(modules_container, {\n\t\t\t\tanimation: 150,\n\t\t\t\tonStart: () => this.dragging = true,\n\t\t\t\tonEnd: () => {\n\t\t\t\t\tthis.dragging = false;\n\t\t\t\t\tlet modules = Array.from(modules_container.querySelectorAll('.module-box'))\n\t\t\t\t\t\t.map(node => node.dataset.moduleName);\n\n\t\t\t\t\tthis.$emit('module-order-change', {\n\t\t\t\t\t\tmodule_category: this.category,\n\t\t\t\t\t\tmodules\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tshow_module_card_customize_dialog(module) {\n\t\t\tconst me = this;\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Customize Shortcuts'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('Shortcuts'),\n\t\t\t\t\t\tfieldname: 'links',\n\t\t\t\t\t\tfieldtype: 'MultiSelectPills',\n\t\t\t\t\t\tget_data: () => {\n\t\t\t\t\t\t\tconst module_links = me.fetched_module_links[module.module_name];\n\t\t\t\t\t\t\tif (!module_links) {\n\t\t\t\t\t\t\t\treturn frappe.xcall('frappe.desk.moduleview.get_links_for_module', {\n\t\t\t\t\t\t\t\t\tapp: module.app,\n\t\t\t\t\t\t\t\t\tmodule: module.module_name,\n\t\t\t\t\t\t\t\t}).then(links => {\n\t\t\t\t\t\t\t\t\tme.fetched_module_links[module.module_name] = links;\n\t\t\t\t\t\t\t\t\treturn links;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn module_links;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: module.links.filter(l => !l.hidden).map(l => l.name)\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __('Save'),\n\t\t\t\tprimary_action: ({ links }) => {\n\t\t\t\t\tfrappe.call('frappe.desk.moduleview.update_links_for_module', {\n\t\t\t\t\t\tmodule_name: module.module_name,\n\t\t\t\t\t\tlinks: links || []\n\t\t\t\t\t}).then(r => {\n\t\t\t\t\t\tthis.$emit('update-desktop-settings', r.message);\n\t\t\t\t\t});\n\t\t\t\t\td.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\td.show();\n\t\t},\n\t}\n}\n","<template>\n  <div>\n    <div class=\"section-header level text-muted\">\n      <div class=\"module-category h6 uppercase\">{{ __(this.category) }}</div>\n    </div>\n\n    <div class=\"modules-container\" :class=\"{'dragging': dragging}\" ref=\"modules-container\">\n      <desk-module-box\n        v-for=\"(module, index) in modules\"\n        :key=\"module.module_name\"\n        :index=\"index\"\n        v-bind=\"module\"\n\t\t@customize=\"show_module_card_customize_dialog(module)\"\n      ></desk-module-box>\n    </div>\n  </div>\n</template>\n\n<script>\nimport DeskModuleBox from \"./DeskModuleBox.vue\";\n\nexport default {\n\tprops: ['category', 'modules'],\n\tcomponents: {\n\t\tDeskModuleBox\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdragging: false,\n\t\t\tfetched_module_links: {}\n\t\t}\n\t},\n\tmounted() {\n\t\tif (!frappe.utils.is_mobile()) {\n\t\t\tthis.setup_sortable();\n\t\t}\n\t},\n\tmethods: {\n\t\tsetup_sortable() {\n\t\t\tlet modules_container =this.$refs['modules-container'];\n\t\t\tthis.sortable = new Sortable(modules_container, {\n\t\t\t\tanimation: 150,\n\t\t\t\tonStart: () => this.dragging = true,\n\t\t\t\tonEnd: () => {\n\t\t\t\t\tthis.dragging = false;\n\t\t\t\t\tlet modules = Array.from(modules_container.querySelectorAll('.module-box'))\n\t\t\t\t\t\t.map(node => node.dataset.moduleName);\n\n\t\t\t\t\tthis.$emit('module-order-change', {\n\t\t\t\t\t\tmodule_category: this.category,\n\t\t\t\t\t\tmodules\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tshow_module_card_customize_dialog(module) {\n\t\t\tconst me = this;\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Customize Shortcuts'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('Shortcuts'),\n\t\t\t\t\t\tfieldname: 'links',\n\t\t\t\t\t\tfieldtype: 'MultiSelectPills',\n\t\t\t\t\t\tget_data: () => {\n\t\t\t\t\t\t\tconst module_links = me.fetched_module_links[module.module_name];\n\t\t\t\t\t\t\tif (!module_links) {\n\t\t\t\t\t\t\t\treturn frappe.xcall('frappe.desk.moduleview.get_links_for_module', {\n\t\t\t\t\t\t\t\t\tapp: module.app,\n\t\t\t\t\t\t\t\t\tmodule: module.module_name,\n\t\t\t\t\t\t\t\t}).then(links => {\n\t\t\t\t\t\t\t\t\tme.fetched_module_links[module.module_name] = links;\n\t\t\t\t\t\t\t\t\treturn links;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn module_links;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: module.links.filter(l => !l.hidden).map(l => l.name)\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __('Save'),\n\t\t\t\tprimary_action: ({ links }) => {\n\t\t\t\t\tfrappe.call('frappe.desk.moduleview.update_links_for_module', {\n\t\t\t\t\t\tmodule_name: module.module_name,\n\t\t\t\t\t\tlinks: links || []\n\t\t\t\t\t}).then(r => {\n\t\t\t\t\t\tthis.$emit('update-desktop-settings', r.message);\n\t\t\t\t\t});\n\t\t\t\t\td.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\td.show();\n\t\t},\n\t}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.modules-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-auto-rows: minmax(62px, 1fr);\n  column-gap: 15px;\n  row-gap: 15px;\n  align-items: center;\n}\n</style>\n","function generate_route(item) {\n\tif(item.type===\"doctype\") {\n\t\titem.doctype = item.name;\n\t}\n\tlet route = '';\n\tif(!item.route) {\n\t\tif(item.link) {\n\t\t\troute=strip(item.link, \"#\");\n\t\t} else if(item.type===\"doctype\") {\n\t\t\tif(frappe.model.is_single(item.doctype)) {\n\t\t\t\troute = 'Form/' + item.doctype;\n\t\t\t} else {\n\t\t\t\tif (item.filters) {\n\t\t\t\t\tfrappe.route_options=item.filters;\n\t\t\t\t}\n\t\t\t\troute=\"List/\" + item.doctype;\n\t\t\t}\n\t\t} else if(item.type===\"report\" && item.is_query_report) {\n\t\t\troute=\"query-report/\" + item.name;\n\t\t} else if(item.type===\"report\") {\n\t\t\troute=\"List/\" + item.doctype + \"/Report/\" + item.name;\n\t\t} else if(item.type===\"page\") {\n\t\t\troute=item.name;\n\t\t}\n\n\t\troute = '#' + route;\n\t} else {\n\t\troute = item.route;\n\t}\n\n\tif(item.route_options) {\n\t\troute += \"?\" + $.map(item.route_options, function(value, key) {\n\t\t\treturn encodeURIComponent(key) + \"=\" + encodeURIComponent(value); }).join('&');\n\t}\n\n\t// if(item.type===\"page\" || item.type===\"help\" || item.type===\"report\" ||\n\t// (item.doctype && frappe.model.can_read(item.doctype))) {\n\t//     item.shown = true;\n\t// }\n\treturn route;\n}\n\nexport {\n\tgenerate_route\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DeskSection from './DeskSection.vue';\nimport { generate_route } from './utils';\n\nexport default {\n\tname: 'Desktop',\n\tcomponents: {\n\t\tDeskSection\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmodule_categories: ['Modules', 'Domains', 'Places', 'Administration'],\n\t\t\tmodules: [],\n\t\t\thome_settings_fetched: false\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.fetch_desktop_settings();\n\t},\n\tmethods: {\n\t\tfetch_desktop_settings() {\n\t\t\tfrappe.call('frappe.desk.moduleview.get_desktop_settings')\n\t\t\t\t.then(r => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tthis.update_desktop_settings(r.message);\n\t\t\t\t\t\tthis.home_settings_fetched = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tupdate_desktop_settings(desktop_settings) {\n\t\t\tthis.modules = this.add_routes_for_module_links(desktop_settings);\n\t\t},\n\t\tadd_routes_for_module_links(user_settings) {\n\t\t\tfor (let category in user_settings) {\n\t\t\t\tuser_settings[category] = user_settings[category].map(m => {\n\t\t\t\t\tm.links = (m.links || []).map(link => {\n\t\t\t\t\t\tlink.route = generate_route(link);\n\t\t\t\t\t\treturn link;\n\t\t\t\t\t});\n\t\t\t\t\treturn m;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn user_settings;\n\t\t},\n\t\tupdate_module_order({ module_category, modules }) {\n\t\t\tfrappe.call('frappe.desk.moduleview.update_modules_order', { module_category, modules });\n\t\t},\n\t\tget_modules_for_category(category) {\n\t\t\treturn this.modules[category] || [];\n\t\t},\n\t\tshow_hide_cards_dialog() {\n\t\t\tfrappe.call('frappe.desk.moduleview.get_options_for_show_hide_cards')\n\t\t\t\t.then(r => {\n\t\t\t\t\tlet { user_options, global_options } = r.message;\n\n\t\t\t\t\tlet user_value = `User (${frappe.session.user})`\n\t\t\t\t\tlet fields = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('Setup For'),\n\t\t\t\t\t\t\tfieldname: 'setup_for',\n\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __('User ({0})', [frappe.session.user]),\n\t\t\t\t\t\t\t\t\tvalue: user_value\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __('Everyone'),\n\t\t\t\t\t\t\t\t\tvalue: 'Everyone'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tdefault: user_value,\n\t\t\t\t\t\t\tdepends_on: doc => frappe.user_roles.includes('System Manager'),\n\t\t\t\t\t\t\tonchange() {\n\t\t\t\t\t\t\t\tlet value = d.get_value('setup_for');\n\t\t\t\t\t\t\t\tlet field = d.get_field('setup_for');\n\t\t\t\t\t\t\t\tlet description = value === 'Everyone' ? __('Hide cards for all users') : '';\n\t\t\t\t\t\t\t\tfield.set_description(description);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\t\tlet user_section = this.module_categories.map(category => {\n\t\t\t\t\t\tlet options = user_options.filter(m => m.category === category);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: category,\n\t\t\t\t\t\t\tfieldname: `user:${category}`,\n\t\t\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcolumns: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t}).filter(f => f.options.length > 0);\n\n\t\t\t\t\tuser_section = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldname: 'user_section',\n\t\t\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\t\t\tdepends_on: doc => doc.setup_for === user_value\n\t\t\t\t\t\t}\n\t\t\t\t\t].concat(user_section);\n\n\t\t\t\t\tlet global_section = this.module_categories.map(category => {\n\t\t\t\t\t\tlet options = global_options.filter(m => m.category === category);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: category,\n\t\t\t\t\t\t\tfieldname: `global:${category}`,\n\t\t\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcolumns: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t}).filter(f => f.options.length > 0);\n\n\t\t\t\t\tglobal_section = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldname: 'global_section',\n\t\t\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\t\t\tdepends_on: doc => doc.setup_for === 'Everyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t].concat(global_section);\n\n\t\t\t\t\tfields = fields.concat(user_section, global_section);\n\n\t\t\t\t\tlet old_values = null;\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Show / Hide Stacks'),\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\tprimary_action_label: __('Save'),\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\tif (values.setup_for === 'Everyone') {\n\t\t\t\t\t\t\t\tthis.update_global_modules(d);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.update_user_modules(d, old_values);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\n\t\t\t\t\t// deepcopy\n\t\t\t\t\told_values = JSON.parse(JSON.stringify(d.get_values()));\n\t\t\t\t});\n\t\t},\n\n\t\tupdate_user_modules(d, old_values) {\n\t\t\tlet new_values = d.get_values();\n\t\t\tlet category_map = {};\n\t\t\tfor (let category of this.module_categories) {\n\t\t\t\tlet old_modules = old_values[`user:${category}`] || [];\n\t\t\t\tlet new_modules = new_values[`user:${category}`] || [];\n\n\t\t\t\tlet removed = old_modules.filter(module => !new_modules.includes(module));\n\t\t\t\tlet added = new_modules.filter(module => !old_modules.includes(module));\n\n\t\t\t\tcategory_map[category] = { added, removed };\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.moduleview.update_hidden_modules',\n\t\t\t\targs: { category_map },\n\t\t\t\tbtn: d.get_primary_btn()\n\t\t\t}).then(r => {\n\t\t\t\tthis.update_desktop_settings(r.message);\n\t\t\t\td.hide();\n\t\t\t});\n\t\t},\n\n\t\tupdate_global_modules(d) {\n\t\t\tlet blocked_modules = [];\n\t\t\tfor (let category of this.module_categories) {\n\t\t\t\tlet field = d.get_field(`global:${category}`);\n\t\t\t\tif (field) {\n\t\t\t\t\tlet unchecked_options = field.get_unchecked_options();\n\t\t\t\t\tblocked_modules = blocked_modules.concat(unchecked_options);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.moduleview.update_global_hidden_modules',\n\t\t\t\targs: {\n\t\t\t\t\tmodules: blocked_modules\n\t\t\t\t},\n\t\t\t\tbtn: d.get_primary_btn()\n\t\t\t}).then(r => {\n\t\t\t\tthis.update_desktop_settings(r.message);\n\t\t\t\td.hide();\n\t\t\t});\n\t\t}\n\t}\n}\n","<template>\n\t<div class=\"modules-page-container\" v-if=\"home_settings_fetched\">\n\t\t<a\n\t\t\tclass=\"btn-show-hide text-muted text-medium\"\n\t\t\t@click=\"show_hide_cards_dialog\"\n\t\t>\n\t\t\t{{ __('Show / Hide Stacks') }}\n\t\t</a>\n\t\t<div\n\t\t\tclass=\"modules-section\"\n\t\t\tv-for=\"(category, i) in module_categories\" :key=\"category\"\n\t\t>\n\t\t\t<desk-section\n\t\t\t\tv-if=\"get_modules_for_category(category).length\"\n\t\t\t\t:category=\"category\"\n\t\t\t\t:modules=\"get_modules_for_category(category)\"\n\t\t\t\t@update-desktop-settings=\"update_desktop_settings\"\n\t\t\t\t@module-order-change=\"update_module_order\"\n\t\t\t>\n\t\t\t</desk-section>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport DeskSection from './DeskSection.vue';\nimport { generate_route } from './utils';\n\nexport default {\n\tname: 'Desktop',\n\tcomponents: {\n\t\tDeskSection\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmodule_categories: ['Modules', 'Domains', 'Places', 'Administration'],\n\t\t\tmodules: [],\n\t\t\thome_settings_fetched: false\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.fetch_desktop_settings();\n\t},\n\tmethods: {\n\t\tfetch_desktop_settings() {\n\t\t\tfrappe.call('frappe.desk.moduleview.get_desktop_settings')\n\t\t\t\t.then(r => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tthis.update_desktop_settings(r.message);\n\t\t\t\t\t\tthis.home_settings_fetched = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tupdate_desktop_settings(desktop_settings) {\n\t\t\tthis.modules = this.add_routes_for_module_links(desktop_settings);\n\t\t},\n\t\tadd_routes_for_module_links(user_settings) {\n\t\t\tfor (let category in user_settings) {\n\t\t\t\tuser_settings[category] = user_settings[category].map(m => {\n\t\t\t\t\tm.links = (m.links || []).map(link => {\n\t\t\t\t\t\tlink.route = generate_route(link);\n\t\t\t\t\t\treturn link;\n\t\t\t\t\t});\n\t\t\t\t\treturn m;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn user_settings;\n\t\t},\n\t\tupdate_module_order({ module_category, modules }) {\n\t\t\tfrappe.call('frappe.desk.moduleview.update_modules_order', { module_category, modules });\n\t\t},\n\t\tget_modules_for_category(category) {\n\t\t\treturn this.modules[category] || [];\n\t\t},\n\t\tshow_hide_cards_dialog() {\n\t\t\tfrappe.call('frappe.desk.moduleview.get_options_for_show_hide_cards')\n\t\t\t\t.then(r => {\n\t\t\t\t\tlet { user_options, global_options } = r.message;\n\n\t\t\t\t\tlet user_value = `User (${frappe.session.user})`\n\t\t\t\t\tlet fields = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('Setup For'),\n\t\t\t\t\t\t\tfieldname: 'setup_for',\n\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __('User ({0})', [frappe.session.user]),\n\t\t\t\t\t\t\t\t\tvalue: user_value\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __('Everyone'),\n\t\t\t\t\t\t\t\t\tvalue: 'Everyone'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tdefault: user_value,\n\t\t\t\t\t\t\tdepends_on: doc => frappe.user_roles.includes('System Manager'),\n\t\t\t\t\t\t\tonchange() {\n\t\t\t\t\t\t\t\tlet value = d.get_value('setup_for');\n\t\t\t\t\t\t\t\tlet field = d.get_field('setup_for');\n\t\t\t\t\t\t\t\tlet description = value === 'Everyone' ? __('Hide cards for all users') : '';\n\t\t\t\t\t\t\t\tfield.set_description(description);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\t\tlet user_section = this.module_categories.map(category => {\n\t\t\t\t\t\tlet options = user_options.filter(m => m.category === category);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: category,\n\t\t\t\t\t\t\tfieldname: `user:${category}`,\n\t\t\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcolumns: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t}).filter(f => f.options.length > 0);\n\n\t\t\t\t\tuser_section = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldname: 'user_section',\n\t\t\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\t\t\tdepends_on: doc => doc.setup_for === user_value\n\t\t\t\t\t\t}\n\t\t\t\t\t].concat(user_section);\n\n\t\t\t\t\tlet global_section = this.module_categories.map(category => {\n\t\t\t\t\t\tlet options = global_options.filter(m => m.category === category);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: category,\n\t\t\t\t\t\t\tfieldname: `global:${category}`,\n\t\t\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcolumns: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t}).filter(f => f.options.length > 0);\n\n\t\t\t\t\tglobal_section = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldname: 'global_section',\n\t\t\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\t\t\tdepends_on: doc => doc.setup_for === 'Everyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t].concat(global_section);\n\n\t\t\t\t\tfields = fields.concat(user_section, global_section);\n\n\t\t\t\t\tlet old_values = null;\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Show / Hide Stacks'),\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\tprimary_action_label: __('Save'),\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\tif (values.setup_for === 'Everyone') {\n\t\t\t\t\t\t\t\tthis.update_global_modules(d);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.update_user_modules(d, old_values);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\n\t\t\t\t\t// deepcopy\n\t\t\t\t\told_values = JSON.parse(JSON.stringify(d.get_values()));\n\t\t\t\t});\n\t\t},\n\n\t\tupdate_user_modules(d, old_values) {\n\t\t\tlet new_values = d.get_values();\n\t\t\tlet category_map = {};\n\t\t\tfor (let category of this.module_categories) {\n\t\t\t\tlet old_modules = old_values[`user:${category}`] || [];\n\t\t\t\tlet new_modules = new_values[`user:${category}`] || [];\n\n\t\t\t\tlet removed = old_modules.filter(module => !new_modules.includes(module));\n\t\t\t\tlet added = new_modules.filter(module => !old_modules.includes(module));\n\n\t\t\t\tcategory_map[category] = { added, removed };\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.moduleview.update_hidden_modules',\n\t\t\t\targs: { category_map },\n\t\t\t\tbtn: d.get_primary_btn()\n\t\t\t}).then(r => {\n\t\t\t\tthis.update_desktop_settings(r.message);\n\t\t\t\td.hide();\n\t\t\t});\n\t\t},\n\n\t\tupdate_global_modules(d) {\n\t\t\tlet blocked_modules = [];\n\t\t\tfor (let category of this.module_categories) {\n\t\t\t\tlet field = d.get_field(`global:${category}`);\n\t\t\t\tif (field) {\n\t\t\t\t\tlet unchecked_options = field.get_unchecked_options();\n\t\t\t\t\tblocked_modules = blocked_modules.concat(unchecked_options);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.moduleview.update_global_hidden_modules',\n\t\t\t\targs: {\n\t\t\t\t\tmodules: blocked_modules\n\t\t\t\t},\n\t\t\t\tbtn: d.get_primary_btn()\n\t\t\t}).then(r => {\n\t\t\t\tthis.update_desktop_settings(r.message);\n\t\t\t\td.hide();\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.modules-page-container {\n\tposition: relative;\n\tmargin-top: 40px;\n\tmargin-bottom: 30px;\n\tpadding-top: 1px;\n}\n\n.modules-section {\n\tposition: relative;\n\tmargin-top: 30px;\n}\n\n.btn-show-hide {\n\tposition: absolute;\n\tright: 0;\n\ttop: 39px;\n\tz-index: 1;\n}\n\n.toolbar-underlay {\n\tmargin: 70px;\n}\n</style>\n\n","import Desktop from './components/Desktop.vue';\n\nfrappe.provide('frappe.views.pageview');\n\nfrappe.views.pageview = {\n\twith_page: function(name, callback) {\n\t\tif(in_list(Object.keys(frappe.standard_pages), name)) {\n\t\t\tif(!frappe.pages[name]) {\n\t\t\t\tfrappe.standard_pages[name]();\n\t\t\t}\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\tif((locals.Page && locals.Page[name] && locals.Page[name].script) || name==window.page_name) {\n\t\t\t// already loaded\n\t\t\tcallback();\n\t\t} else if(localStorage[\"_page:\" + name] && frappe.boot.developer_mode!=1) {\n\t\t\t// cached in local storage\n\t\t\tfrappe.model.sync(JSON.parse(localStorage[\"_page:\" + name]));\n\t\t\tcallback();\n\t\t} else {\n\t\t\t// get fresh\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: 'frappe.desk.desk_page.getpage',\n\t\t\t\targs: {'name':name },\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.docs._dynamic_page) {\n\t\t\t\t\t\tlocalStorage[\"_page:\" + name] = JSON.stringify(r.docs);\n\t\t\t\t\t}\n\t\t\t\t\tcallback();\n\t\t\t\t},\n\t\t\t\tfreeze: true,\n\t\t\t});\n\t\t}\n\t},\n\tshow: function(name) {\n\t\tif(!name) {\n\t\t\tname = (frappe.boot ? frappe.boot.home_page : window.page_name);\n\n\t\t\tif(name === \"desktop\") {\n\t\t\t\tif(!frappe.pages.desktop) {\n\t\t\t\t\tlet page = frappe.container.add_page('desktop');\n\t\t\t\t\tlet container = $('<div class=\"container\"></div>').appendTo(page);\n\t\t\t\t\tcontainer = $('<div></div>').appendTo(container);\n\n\t\t\t\t\tnew Vue({\n\t\t\t\t\t\tel: container[0],\n\t\t\t\t\t\trender: h => h(Desktop)\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfrappe.container.change_to('desktop');\n\t\t\t\tfrappe.utils.set_title(__('Bloomstack'));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfrappe.model.with_doctype(\"Page\", function() {\n\t\t\tfrappe.views.pageview.with_page(name, function(r) {\n\t\t\t\tif(r && r.exc) {\n\t\t\t\t\tif(!r['403'])\n\t\t\t\t\t\tfrappe.show_not_found(name);\n\t\t\t\t} else if(!frappe.pages[name]) {\n\t\t\t\t\tnew frappe.views.Page(name);\n\t\t\t\t}\n\t\t\t\tfrappe.container.change_to(name);\n\t\t\t});\n\t\t});\n\t}\n};"],"names":["let","const","this"],"mappings":"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"}